<section class="bg-main-light p-4 rounded my-3 w-75 mx-auto">
  <h1>Register Now</h1>

  <form [formGroup]="registerform" (ngSubmit)="handleForm()">
    <div class="mb-2">
      <label for="name"> name :</label>
      <input
        #registerNameInput
        id="name"
        class="form-control"
        formControlName="name"
        type="text"
      />

      <div
        *ngIf="
          registerform.get('name')?.errors &&
          (registerform.get('name')?.touched ||
            registerNameInput.value.length > 0)
        "
        class="alert alert-danger"
      >
        <p *ngIf="registerform.get('name')?.getError('required')">
          name is required
        </p>

        <p *ngIf="registerform.get('name')?.getError('minlength')">
          min length is 3
        </p>

        <p *ngIf="registerform.get('name')?.getError('maxlength')">
          max length is 20
        </p>
      </div>
    </div>

    <div class="mb-2">
      <label for="email"> email :</label>
      <input
        #registerEmailInput
        id="email"
        class="form-control"
        formControlName="email"
        type="email"
      />

      <div
        *ngIf="
          registerform.get('email')?.errors &&
          (registerform.get('email')?.touched ||
            registerEmailInput.value.length > 0)
        "
        class="alert alert-danger"
      >
        <p *ngIf="registerform.get('email')?.getError('required')">
          E-mail is required
        </p>

        <p *ngIf="registerform.get('email')?.getError('email')">
          email InValid Format
        </p>
      </div>
    </div>

    <div class="mb-2">
      <label for="password"> password :</label>
      <input
        #registerPasswordInput
        id="password"
        class="form-control"
        formControlName="password"
        type="password"
      />

      <div
        *ngIf="
          registerform.get('password')?.errors &&
          (registerform.get('password')?.touched ||
            registerPasswordInput.value.length > 0)
        "
        class="alert alert-danger"
      >
        <p *ngIf="registerform.get('password')?.getError('required')">
          password is required
        </p>

        <p *ngIf="registerform.get('password')?.getError('pattern')">
          password must start with upperCase and be at least 6 chars
        </p>
      </div>
    </div>

    <div class="mb-2">
      <label for="rePassword"> rePassword :</label>
      <input
        #registerRePasswordInput
        id="rePassword"
        class="form-control"
        formControlName="rePassword"
        type="password"
      />

      <div
        *ngIf="
          registerform.get('rePassword')?.errors &&
          (registerform.get('rePassword')?.touched ||
            registerRePasswordInput.value.length > 0)
        "
        class="alert alert-danger"
      >
        <p *ngIf="registerform.get('rePassword')?.getError('required')">
          rePassword is required
        </p>

        <p *ngIf="registerform.get('rePassword')?.getError('mismatch')">
          rePassword mismatch
        </p>
      </div>
    </div>

    <div class="mb-2">
      <label for="phone"> phone :</label>
      <input
        #registerPhoneInput
        id="phone"
        class="form-control"
        formControlName="phone"
        type="tel"
      />

      <div
        *ngIf="
          registerform.get('phone')?.errors &&
          (registerform.get('phone')?.touched ||
            registerPhoneInput.value.length > 0)
        "
        class="alert alert-danger"
      >
        <p *ngIf="registerform.get('phone')?.getError('required')">
          phone is required
        </p>

        <p *ngIf="registerform.get('phone')?.getError('pattern')">
          accept only egypt phone number
        </p>
      </div>
    </div>

    <button [disabled]="registerform.invalid" class="btn-main ms-auto d-block">
      <span *ngIf="isLoading">
        <i class="fa-solid fa-spinner fa-spin fa-lg"></i>
      </span>
      Register
    </button>

    <p *ngIf="errorMessage" class="alert alert-danger">{{ errorMessage }}</p>
  </form>
</section>
